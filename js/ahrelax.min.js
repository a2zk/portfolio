define(["jquery"],function(e){var b=0,g=0,i=0,c=0,h=((g-b)/2)+b,f=0,a=e(window),d=e("body"),k=[{wrap:"#piece-station",target:null,rate:-0.3,tweak:0,effect:"bgSlideVertical"}],j={bgSlideVertical:function(m,n){var l=(n*m.rate).toFixed(2);
l-=m.rate<0?m.height-m.tweak:0;e(m.wrap).css("background-position","0 "+l+"px");},elementSlideVertical:function(m,n){var l=(n*m.rate).toFixed(2);l-=m.rate<0?m.height-m.tweak:0;
e(m.wrap).css("transform","translate3d(0,"+l+"px,0");}};setup=function(){var m;i=a.height();c=a.width();b=a.scrollTop();g=a.scrollTop()+i;for(var l=k.length-1;
l>=0;l--){m=e(k[l].wrap);k[l].starts=m.offset().top;k[l].ends=m.offset().top+m.height();k[l].height=m.height();k[l].lasts=m.height()/i;}};posUpdate=function(){window.requestAnimationFrame(function(){setVpTop();
animatePieces();});};setVpTop=function(){b=a.scrollTop();g=a.scrollTop()+i;};calcVisibilty=function(o){var n=e(o.wrap),s=o.starts,l=o.ends,p=s<g&&l>b;if(p){n.addClass("inView");
}else{n.removeClass("inView");return p;}var m=((g-b)/2)+b,q=((l-s)/2)+s,r=1-((m-q)/i*-1)<1?(1-((m-q)/i*-1)).toFixed(2):1;progressOut=1-((m-q)/i*-1)>1?(((m-q)/i*-1)*-1).toFixed(2):0;
o.progressIn=r;o.progressOut=progressOut;o.midpoint=q;if(r>0.5){n.addClass("mostInView");n.addClass("beenInView");}else{n.removeClass("mostInView");}return p;
};animatePieces=function(){for(var m=k.length-1;m>=0;m--){var n=e(k[m].wrap),p=false,q=k[m].starts,l=k[m].ends,o;p=calcVisibilty(k[m]);if(p){o=q-g;switch(k[m].effect){case"bgSlideVertical":j.bgSlideVertical(k[m],o);
break;case"opacity":j.opacity(k[m]);break;}}}};init=function(){setup();a.resize(setup);f=setInterval(posUpdate,10);};});